<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./Agda.css" />
    <title>Pat.Substitution</title>
    <link rel="stylesheet" href="/fonts/JuliaMono.css" />
    <style>
      body {
        font-family: JuliaMono, monospace;
        font-size: 13px;
        display: flex;
        flex-flow: row nowrap;
      }
      h1, h2, h3, h4, h5, h6 {
        font-weight: unset;
        text-wrap: balance;
      }
      p {
        text-wrap: pretty;
      }
      nav {
        position: relative;
        font-size: 12px;
        line-height: 1.5;
        padding: 2px;
        margin-right: 2em;
      }
      nav a {
        display: block;
        color: unset;
      }
      .module-tree {
        list-style-type: none;
        padding-left: 2ch;
        margin: 0;
      }
      nav > .module-tree {
        padding-left: 0;
        display: flex;
        flex-flow: column nowrap;
        gap: 1lh;
      }
      .module-tree a:any-link:hover {
        color: #A020F0 !important;
      }
      .current-module {
        color: #A020F0;
        font-weight: bold;
      }
      .Agda {
        margin: 0;
      }
    </style>
  </head>
  <body>
    
    <nav>
      
      <ul class="module-tree">
        
          <li>
            
              <a href="Everything.html" class="">
                Everything
              </a>
            
            
          </li>
        
          <li>
            
              <a>Data</a>
            
            
              
      <ul class="module-tree">
        
          <li>
            
              <a href="Data.StagedList.html" class="">
                StagedList
              </a>
            
            
          </li>
        
          <li>
            
              <a href="Data.StagedTree.html" class="">
                StagedTree
              </a>
            
            
          </li>
        
      </ul>
    
            
          </li>
        
          <li>
            
              <a>CtxTyp</a>
            
            
              
      <ul class="module-tree">
        
          <li>
            
              <a href="CtxTyp.Context.html" class="">
                Context
              </a>
            
            
          </li>
        
          <li>
            
              <a href="CtxTyp.Term.html" class="">
                Term
              </a>
            
            
              
      <ul class="module-tree">
        
          <li>
            
              <a href="CtxTyp.Term.Properties.html" class="">
                Properties
              </a>
            
            
          </li>
        
      </ul>
    
            
          </li>
        
          <li>
            
              <a href="CtxTyp.Depth.html" class="">
                Depth
              </a>
            
            
          </li>
        
          <li>
            
              <a href="CtxTyp.Substitution.html" class="">
                Substitution
              </a>
            
            
              
      <ul class="module-tree">
        
          <li>
            
              <a href="CtxTyp.Substitution.Properties.html" class="">
                Properties
              </a>
            
            
          </li>
        
      </ul>
    
            
          </li>
        
          <li>
            
              <a href="CtxTyp.Reduction.html" class="">
                Reduction
              </a>
            
            
          </li>
        
          <li>
            
              <a href="CtxTyp.Examples.html" class="">
                Examples
              </a>
            
            
          </li>
        
          <li>
            
              <a href="CtxTyp.Denotational.html" class="">
                Denotational
              </a>
            
            
              
      <ul class="module-tree">
        
          <li>
            
              <a href="CtxTyp.Denotational.Adequacy.html" class="">
                Adequacy
              </a>
            
            
          </li>
        
      </ul>
    
            
          </li>
        
      </ul>
    
            
          </li>
        
          <li>
            
              <a>Splice</a>
            
            
              
      <ul class="module-tree">
        
          <li>
            
              <a href="Splice.Context.html" class="">
                Context
              </a>
            
            
          </li>
        
          <li>
            
              <a href="Splice.Term.html" class="">
                Term
              </a>
            
            
          </li>
        
          <li>
            
              <a href="Splice.Translate.html" class="">
                Translate
              </a>
            
            
          </li>
        
      </ul>
    
            
          </li>
        
          <li>
            
              <a>Pat</a>
            
            
              
      <ul class="module-tree">
        
          <li>
            
              <a href="Pat.Context.html" class="">
                Context
              </a>
            
            
              
      <ul class="module-tree">
        
          <li>
            
              <a href="Pat.Context.Equality.html" class="">
                Equality
              </a>
            
            
          </li>
        
      </ul>
    
            
          </li>
        
          <li>
            
              <a href="Pat.Term.html" class="">
                Term
              </a>
            
            
              
      <ul class="module-tree">
        
          <li>
            
              <a href="Pat.Term.Equality.html" class="">
                Equality
              </a>
            
            
          </li>
        
      </ul>
    
            
          </li>
        
          <li>
            
              <a href="Pat.Matching.html" class="">
                Matching
              </a>
            
            
          </li>
        
          <li>
            
              <a href="Pat.Depth.html" class="">
                Depth
              </a>
            
            
          </li>
        
          <li>
            
              <a href="Pat.Substitution.html" class="current-module">
                Substitution
              </a>
            
            
          </li>
        
          <li>
            
              <a href="Pat.Rewriting.html" class="">
                Rewriting
              </a>
            
            
          </li>
        
          <li>
            
              <a href="Pat.Reduction.html" class="">
                Reduction
              </a>
            
            
          </li>
        
          <li>
            
              <a href="Pat.Examples.html" class="">
                Examples
              </a>
            
            
          </li>
        
          <li>
            
              <a href="Pat.Denotational.html" class="">
                Denotational
              </a>
            
            
          </li>
        
      </ul>
    
            
          </li>
        
      </ul>
    
    </nav>
    <pre class="Agda"><a id="1" class="Comment">{-|
This module defines substitution functions for well-typed terms and substitutions
as described in section 4.1.
Intrinsic typing ensures that substitution preserves typing (Lemma 4.1).
-}</a>

<a id="193" class="Symbol">{-#</a> <a id="197" class="Keyword">OPTIONS</a> <a id="205" class="Pragma">--safe</a> <a id="212" class="Symbol">#-}</a>
<a id="216" class="Symbol">{-#</a> <a id="220" class="Keyword">OPTIONS</a> <a id="228" class="Pragma">--with-K</a> <a id="237" class="Symbol">#-}</a>
<a id="241" class="Keyword">module</a> <a id="248" href="Pat.Substitution.html" class="Module">Pat.Substitution</a> <a id="265" class="Keyword">where</a>

<a id="272" class="Keyword">open</a> <a id="277" class="Keyword">import</a> <a id="284" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="293" class="Keyword">using</a> <a id="299" class="Symbol">(</a><a id="300" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="301" class="Symbol">;</a> <a id="303" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a><a id="306" class="Symbol">;</a> <a id="308" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a><a id="312" class="Symbol">;</a> <a id="314" href="Data.Nat.Base.html#8770" class="InductiveConstructor">≤‴-refl</a><a id="321" class="Symbol">)</a>
<a id="323" class="Keyword">open</a> <a id="328" class="Keyword">import</a> <a id="335" href="Function.html" class="Module">Function</a> <a id="344" class="Keyword">using</a> <a id="350" class="Symbol">(</a><a id="351" href="Function.Base.html#704" class="Function">id</a><a id="353" class="Symbol">)</a>

<a id="356" class="Keyword">open</a> <a id="361" class="Keyword">import</a> <a id="368" href="Pat.Context.html" class="Module">Pat.Context</a>
<a id="380" class="Keyword">open</a> <a id="385" class="Keyword">import</a> <a id="392" href="Pat.Term.html" class="Module">Pat.Term</a>
<a id="401" class="Keyword">open</a> <a id="406" class="Keyword">import</a> <a id="413" href="Pat.Depth.html" class="Module">Pat.Depth</a>
<a id="423" class="Keyword">open</a> <a id="428" class="Keyword">import</a> <a id="435" href="Pat.Matching.html" class="Module">Pat.Matching</a>

<a id="449" class="Comment">-- We first define variants of the substitution functions that accept a depth upper bound d</a>
<a id="541" class="Comment">-- for the substitution being applied. This allows the termination checker</a>
<a id="616" class="Comment">-- to use d as a termination measure.</a>
<a id="654" class="Comment">-- Since λ○▷ has patterns and substitution patterns, we need to define</a>
<a id="725" class="Comment">-- the corresponding substitution functions for them as well.</a>
<a id="substᵈ"></a><a id="787" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="794" class="Symbol">:</a> <a id="796" class="Symbol">∀</a> <a id="798" class="Symbol">{</a><a id="799" href="Pat.Substitution.html#799" class="Bound">d</a><a id="800" class="Symbol">}</a> <a id="802" class="Symbol">{</a><a id="803" href="Pat.Substitution.html#803" class="Bound">σ</a> <a id="805" class="Symbol">:</a> <a id="807" href="Pat.Term.html#2470" class="Function">Subst</a> <a id="813" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="815" href="Pat.Context.html#582" class="Generalizable">Γ′</a><a id="817" class="Symbol">}</a> <a id="819" class="Symbol">→</a> <a id="821" href="Pat.Substitution.html#803" class="Bound">σ</a> <a id="823" href="Pat.Depth.html#1709" class="Datatype Operator">≤ᵈ′</a> <a id="827" href="Pat.Substitution.html#799" class="Bound">d</a> <a id="829" class="Symbol">→</a> <a id="831" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="833" href="Pat.Term.html#560" class="Datatype">⊢</a> <a id="835" href="Pat.Context.html#557" class="Generalizable">A</a> <a id="837" href="Pat.Term.html#560" class="Datatype">^</a> <a id="839" href="Data.StagedList.html#843" class="Generalizable">n</a> <a id="841" class="Symbol">→</a> <a id="843" href="Pat.Context.html#582" class="Generalizable">Γ′</a> <a id="846" href="Pat.Term.html#560" class="Datatype">⊢</a> <a id="848" href="Pat.Context.html#557" class="Generalizable">A</a> <a id="850" href="Pat.Term.html#560" class="Datatype">^</a> <a id="852" href="Data.StagedList.html#843" class="Generalizable">n</a>
<a id="substSubstᵈ"></a><a id="854" href="Pat.Substitution.html#854" class="Function">substSubstᵈ</a> <a id="866" class="Symbol">:</a> <a id="868" class="Symbol">∀</a> <a id="870" class="Symbol">{</a><a id="871" href="Pat.Substitution.html#871" class="Bound">d</a><a id="872" class="Symbol">}</a> <a id="874" class="Symbol">{</a><a id="875" href="Pat.Substitution.html#875" class="Bound">σ</a> <a id="877" class="Symbol">:</a> <a id="879" href="Pat.Term.html#2470" class="Function">Subst</a> <a id="885" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="887" href="Pat.Context.html#582" class="Generalizable">Γ′</a><a id="889" class="Symbol">}</a> <a id="891" class="Symbol">→</a> <a id="893" href="Pat.Substitution.html#875" class="Bound">σ</a> <a id="895" href="Pat.Depth.html#1709" class="Datatype Operator">≤ᵈ′</a> <a id="899" href="Pat.Substitution.html#871" class="Bound">d</a> <a id="901" class="Symbol">→</a> <a id="903" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="905" href="Pat.Term.html#1421" class="Datatype Operator">⊩</a> <a id="907" href="Pat.Context.html#580" class="Generalizable">Δ</a> <a id="909" class="Symbol">→</a> <a id="911" href="Pat.Context.html#582" class="Generalizable">Γ′</a> <a id="914" href="Pat.Term.html#1421" class="Datatype Operator">⊩</a> <a id="916" href="Pat.Context.html#580" class="Generalizable">Δ</a>
<a id="substSubstItemᵈ"></a><a id="918" href="Pat.Substitution.html#918" class="Function">substSubstItemᵈ</a> <a id="934" class="Symbol">:</a> <a id="936" class="Symbol">∀</a> <a id="938" class="Symbol">{</a><a id="939" href="Pat.Substitution.html#939" class="Bound">d</a><a id="940" class="Symbol">}</a> <a id="942" class="Symbol">{</a><a id="943" href="Pat.Substitution.html#943" class="Bound">σ</a> <a id="945" class="Symbol">:</a> <a id="947" href="Pat.Term.html#2470" class="Function">Subst</a> <a id="953" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="955" href="Pat.Context.html#582" class="Generalizable">Γ′</a><a id="957" class="Symbol">}</a> <a id="959" class="Symbol">→</a> <a id="961" href="Pat.Substitution.html#943" class="Bound">σ</a> <a id="963" href="Pat.Depth.html#1709" class="Datatype Operator">≤ᵈ′</a> <a id="967" href="Pat.Substitution.html#939" class="Bound">d</a> <a id="969" class="Symbol">→</a> <a id="971" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="973" href="Pat.Term.html#970" class="Datatype Operator">⊩[</a> <a id="976" href="Pat.Context.html#580" class="Generalizable">Δ</a> <a id="978" href="Pat.Term.html#970" class="Datatype Operator">⊢</a> <a id="980" href="Pat.Context.html#557" class="Generalizable">A</a> <a id="982" href="Pat.Term.html#970" class="Datatype Operator">^</a> <a id="984" href="Data.StagedList.html#857" class="Generalizable">m≥n</a> <a id="988" href="Pat.Term.html#970" class="Datatype Operator">]</a> <a id="990" class="Symbol">→</a> <a id="992" href="Pat.Context.html#582" class="Generalizable">Γ′</a> <a id="995" href="Pat.Term.html#970" class="Datatype Operator">⊩[</a> <a id="998" href="Pat.Context.html#580" class="Generalizable">Δ</a> <a id="1000" href="Pat.Term.html#970" class="Datatype Operator">⊢</a> <a id="1002" href="Pat.Context.html#557" class="Generalizable">A</a> <a id="1004" href="Pat.Term.html#970" class="Datatype Operator">^</a> <a id="1006" href="Data.StagedList.html#857" class="Generalizable">m≥n</a> <a id="1010" href="Pat.Term.html#970" class="Datatype Operator">]</a>
<a id="substPatternᵈ"></a><a id="1012" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="1026" class="Symbol">:</a> <a id="1028" class="Symbol">∀</a> <a id="1030" class="Symbol">{</a><a id="1031" href="Pat.Substitution.html#1031" class="Bound">d</a><a id="1032" class="Symbol">}</a> <a id="1034" class="Symbol">{</a><a id="1035" href="Pat.Substitution.html#1035" class="Bound">σ</a> <a id="1037" class="Symbol">:</a> <a id="1039" href="Pat.Term.html#2470" class="Function">Subst</a> <a id="1045" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="1047" href="Pat.Context.html#582" class="Generalizable">Γ′</a><a id="1049" class="Symbol">}</a> <a id="1051" class="Symbol">→</a> <a id="1053" href="Pat.Substitution.html#1035" class="Bound">σ</a> <a id="1055" href="Pat.Depth.html#1709" class="Datatype Operator">≤ᵈ′</a> <a id="1059" href="Pat.Substitution.html#1031" class="Bound">d</a> <a id="1061" class="Symbol">→</a> <a id="1063" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="1065" href="Pat.Term.html#2643" class="Datatype">∣</a> <a id="1067" href="Pat.Context.html#580" class="Generalizable">Δ</a> <a id="1069" href="Pat.Term.html#2643" class="Datatype">⊢</a> <a id="1071" href="Pat.Context.html#557" class="Generalizable">A</a> <a id="1073" href="Pat.Term.html#2643" class="Datatype">^</a> <a id="1075" href="Data.StagedList.html#843" class="Generalizable">n</a> <a id="1077" href="Pat.Term.html#2643" class="Datatype">↝</a> <a id="1079" href="Pat.Term.html#2550" class="Generalizable">Π</a> <a id="1081" class="Symbol">→</a> <a id="1083" href="Pat.Context.html#582" class="Generalizable">Γ′</a> <a id="1086" href="Pat.Term.html#2643" class="Datatype">∣</a> <a id="1088" href="Pat.Context.html#580" class="Generalizable">Δ</a> <a id="1090" href="Pat.Term.html#2643" class="Datatype">⊢</a> <a id="1092" href="Pat.Context.html#557" class="Generalizable">A</a> <a id="1094" href="Pat.Term.html#2643" class="Datatype">^</a> <a id="1096" href="Data.StagedList.html#843" class="Generalizable">n</a> <a id="1098" href="Pat.Term.html#2643" class="Datatype">↝</a> <a id="1100" href="Pat.Term.html#2550" class="Generalizable">Π</a>
<a id="substSubstPatternᵈ"></a><a id="1102" href="Pat.Substitution.html#1102" class="Function">substSubstPatternᵈ</a> <a id="1121" class="Symbol">:</a> <a id="1123" class="Symbol">∀</a> <a id="1125" class="Symbol">{</a><a id="1126" href="Pat.Substitution.html#1126" class="Bound">d</a><a id="1127" class="Symbol">}</a> <a id="1129" class="Symbol">{</a><a id="1130" href="Pat.Substitution.html#1130" class="Bound">σ</a> <a id="1132" class="Symbol">:</a> <a id="1134" href="Pat.Term.html#2470" class="Function">Subst</a> <a id="1140" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="1142" href="Pat.Context.html#582" class="Generalizable">Γ′</a><a id="1144" class="Symbol">}</a> <a id="1146" class="Symbol">→</a> <a id="1148" href="Pat.Substitution.html#1130" class="Bound">σ</a> <a id="1150" href="Pat.Depth.html#1709" class="Datatype Operator">≤ᵈ′</a> <a id="1154" href="Pat.Substitution.html#1126" class="Bound">d</a> <a id="1156" class="Symbol">→</a> <a id="1158" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="1160" href="Pat.Term.html#3520" class="Datatype Operator">∣</a> <a id="1162" href="Pat.Context.html#580" class="Generalizable">Δ</a> <a id="1164" href="Pat.Term.html#3520" class="Datatype Operator">⊩</a> <a id="1166" href="Pat.Context.html#585" class="Generalizable">Δ′</a> <a id="1169" href="Pat.Term.html#3520" class="Datatype Operator">↝</a> <a id="1171" href="Pat.Term.html#2550" class="Generalizable">Π</a> <a id="1173" class="Symbol">→</a> <a id="1175" href="Pat.Context.html#582" class="Generalizable">Γ′</a> <a id="1178" href="Pat.Term.html#3520" class="Datatype Operator">∣</a> <a id="1180" href="Pat.Context.html#580" class="Generalizable">Δ</a> <a id="1182" href="Pat.Term.html#3520" class="Datatype Operator">⊩</a> <a id="1184" href="Pat.Context.html#585" class="Generalizable">Δ′</a> <a id="1187" href="Pat.Term.html#3520" class="Datatype Operator">↝</a> <a id="1189" href="Pat.Term.html#2550" class="Generalizable">Π</a>
<a id="substSubstPatternItemᵈ"></a><a id="1191" href="Pat.Substitution.html#1191" class="Function">substSubstPatternItemᵈ</a> <a id="1214" class="Symbol">:</a> <a id="1216" class="Symbol">∀</a> <a id="1218" class="Symbol">{</a><a id="1219" href="Pat.Substitution.html#1219" class="Bound">d</a><a id="1220" class="Symbol">}</a> <a id="1222" class="Symbol">{</a><a id="1223" href="Pat.Substitution.html#1223" class="Bound">σ</a> <a id="1225" class="Symbol">:</a> <a id="1227" href="Pat.Term.html#2470" class="Function">Subst</a> <a id="1233" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="1235" href="Pat.Context.html#582" class="Generalizable">Γ′</a><a id="1237" class="Symbol">}</a> <a id="1239" class="Symbol">→</a> <a id="1241" href="Pat.Substitution.html#1223" class="Bound">σ</a> <a id="1243" href="Pat.Depth.html#1709" class="Datatype Operator">≤ᵈ′</a> <a id="1247" href="Pat.Substitution.html#1219" class="Bound">d</a> <a id="1249" class="Symbol">→</a> <a id="1251" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="1253" href="Pat.Term.html#2937" class="Datatype Operator">∣</a> <a id="1255" href="Pat.Context.html#580" class="Generalizable">Δ</a> <a id="1257" href="Pat.Term.html#2937" class="Datatype Operator">⊩[</a> <a id="1260" href="Pat.Context.html#585" class="Generalizable">Δ′</a> <a id="1263" href="Pat.Term.html#2937" class="Datatype Operator">⊢</a> <a id="1265" href="Pat.Context.html#557" class="Generalizable">A</a> <a id="1267" href="Pat.Term.html#2937" class="Datatype Operator">^</a> <a id="1269" href="Data.StagedList.html#857" class="Generalizable">m≥n</a> <a id="1273" href="Pat.Term.html#2937" class="Datatype Operator">]↝</a> <a id="1276" href="Pat.Term.html#2550" class="Generalizable">Π</a> <a id="1278" class="Symbol">→</a> <a id="1280" href="Pat.Context.html#582" class="Generalizable">Γ′</a> <a id="1283" href="Pat.Term.html#2937" class="Datatype Operator">∣</a> <a id="1285" href="Pat.Context.html#580" class="Generalizable">Δ</a> <a id="1287" href="Pat.Term.html#2937" class="Datatype Operator">⊩[</a> <a id="1290" href="Pat.Context.html#585" class="Generalizable">Δ′</a> <a id="1293" href="Pat.Term.html#2937" class="Datatype Operator">⊢</a> <a id="1295" href="Pat.Context.html#557" class="Generalizable">A</a> <a id="1297" href="Pat.Term.html#2937" class="Datatype Operator">^</a> <a id="1299" href="Data.StagedList.html#857" class="Generalizable">m≥n</a> <a id="1303" href="Pat.Term.html#2937" class="Datatype Operator">]↝</a> <a id="1306" href="Pat.Term.html#2550" class="Generalizable">Π</a>

<a id="1309" class="Comment">-- The variable case of substᵈ, where the depth upper bound d decreases by 1.</a>
<a id="1387" class="Comment">-- We define this separately to simplify proofs of substitution properties.</a>
<a id="1463" class="Comment">-- Operationally, it takes a substitution item `item` and a delayed substitution σ which provides its dependencies, and returns a term as a result.</a>
<a id="useItemᵈ"></a><a id="1611" href="Pat.Substitution.html#1611" class="Function">useItemᵈ</a> <a id="1620" class="Symbol">:</a> <a id="1622" class="Symbol">∀</a> <a id="1624" class="Symbol">{</a><a id="1625" href="Pat.Substitution.html#1625" class="Bound">d</a><a id="1626" class="Symbol">}</a> <a id="1628" class="Symbol">{</a><a id="1629" href="Pat.Substitution.html#1629" class="Bound">item</a> <a id="1634" class="Symbol">:</a> <a id="1636" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="1638" href="Pat.Term.html#970" class="Datatype Operator">⊩[</a> <a id="1641" href="Pat.Context.html#580" class="Generalizable">Δ</a> <a id="1643" href="Pat.Term.html#970" class="Datatype Operator">⊢</a> <a id="1645" href="Pat.Context.html#557" class="Generalizable">A</a> <a id="1647" href="Pat.Term.html#970" class="Datatype Operator">^</a> <a id="1649" href="Data.Nat.Base.html#8770" class="InductiveConstructor">≤‴-refl</a> <a id="1657" href="Pat.Term.html#970" class="Datatype Operator">]</a><a id="1658" class="Symbol">}</a> <a id="1660" class="Symbol">→</a> <a id="1662" href="Pat.Substitution.html#1629" class="Bound">item</a> <a id="1667" href="Pat.Depth.html#1443" class="Datatype Operator">≤ᵈ″</a> <a id="1671" href="Pat.Substitution.html#1625" class="Bound">d</a> <a id="1673" class="Symbol">→</a> <a id="1675" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="1677" href="Pat.Term.html#1421" class="Datatype Operator">⊩</a> <a id="1679" href="Pat.Context.html#580" class="Generalizable">Δ</a> <a id="1681" class="Symbol">→</a> <a id="1683" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="1685" href="Pat.Term.html#560" class="Datatype">⊢</a> <a id="1687" href="Pat.Context.html#557" class="Generalizable">A</a> <a id="1689" href="Pat.Term.html#560" class="Datatype">^</a> <a id="1691" href="Data.StagedList.html#843" class="Generalizable">n</a>
<a id="1693" href="Pat.Substitution.html#1611" class="Function">useItemᵈ</a> <a id="1702" class="Symbol">{</a><a id="1703" class="Argument">item</a> <a id="1708" class="Symbol">=</a> <a id="1710" href="Pat.Term.html#1148" class="InductiveConstructor">var</a> <a id="1714" href="Pat.Substitution.html#1714" class="Bound">x</a><a id="1715" class="Symbol">}</a> <a id="1717" class="Symbol">_</a> <a id="1719" href="Pat.Substitution.html#1719" class="Bound">σ</a> <a id="1721" class="Symbol">=</a> <a id="1723" href="Pat.Term.html#6841" class="InductiveConstructor Operator">`</a> <a id="1725" href="Pat.Substitution.html#1714" class="Bound">x</a> <a id="1727" href="Pat.Term.html#6841" class="InductiveConstructor Operator">`with</a> <a id="1733" href="Pat.Substitution.html#1719" class="Bound">σ</a>
<a id="1735" href="Pat.Substitution.html#1611" class="Function">useItemᵈ</a> <a id="1744" class="Symbol">{</a><a id="1745" class="Argument">d</a> <a id="1747" class="Symbol">=</a> <a id="1749" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1753" href="Pat.Substitution.html#1753" class="Bound">d</a><a id="1754" class="Symbol">}</a> <a id="1756" class="Symbol">{</a><a id="1757" class="Argument">item</a> <a id="1762" class="Symbol">=</a> <a id="1764" href="Pat.Term.html#1045" class="InductiveConstructor">term</a> <a id="1769" href="Pat.Substitution.html#1769" class="Bound">e</a><a id="1770" class="Symbol">}</a> <a id="1772" href="Pat.Substitution.html#1772" class="Bound">Δ&lt;d</a> <a id="1776" href="Pat.Substitution.html#1776" class="Bound">σ</a> <a id="1778" class="Symbol">=</a> <a id="1780" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="1787" class="Symbol">{</a><a id="1788" class="Argument">d</a> <a id="1790" class="Symbol">=</a> <a id="1792" href="Pat.Substitution.html#1753" class="Bound">d</a><a id="1793" class="Symbol">}</a> <a id="1795" class="Symbol">(</a><a id="1796" href="Pat.Depth.html#5490" class="Function">liftᵈ</a> <a id="1802" href="Function.Base.html#704" class="Function">id</a> <a id="1805" href="Pat.Depth.html#1857" class="InductiveConstructor Operator">++ˢᵈ</a> <a id="1810" href="Pat.Depth.html#3869" class="Function">≤ᵈ-dom</a> <a id="1817" href="Pat.Substitution.html#1776" class="Bound">σ</a> <a id="1819" class="Symbol">(</a><a id="1820" href="Pat.Depth.html#1566" class="Function">untermᵈ</a> <a id="1828" href="Pat.Substitution.html#1772" class="Bound">Δ&lt;d</a><a id="1831" class="Symbol">))</a> <a id="1834" href="Pat.Substitution.html#1769" class="Bound">e</a>

<a id="1837" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="1844" href="Pat.Substitution.html#1844" class="Bound">σᵈ</a> <a id="1847" class="Symbol">(</a><a id="1848" href="Pat.Term.html#6841" class="InductiveConstructor Operator">`</a> <a id="1850" href="Pat.Substitution.html#1850" class="Bound">x</a> <a id="1852" href="Pat.Term.html#6841" class="InductiveConstructor Operator">`with</a> <a id="1858" href="Pat.Substitution.html#1858" class="Bound">σ₁</a><a id="1860" class="Symbol">)</a> <a id="1862" class="Symbol">=</a> <a id="1864" href="Pat.Substitution.html#1611" class="Function">useItemᵈ</a> <a id="1873" class="Symbol">(</a><a id="1874" href="Pat.Depth.html#4172" class="Function">lookupᵈ</a> <a id="1882" href="Pat.Substitution.html#1844" class="Bound">σᵈ</a> <a id="1885" href="Pat.Substitution.html#1850" class="Bound">x</a><a id="1886" class="Symbol">)</a> <a id="1888" class="Symbol">(</a><a id="1889" href="Pat.Substitution.html#854" class="Function">substSubstᵈ</a> <a id="1901" href="Pat.Substitution.html#1844" class="Bound">σᵈ</a> <a id="1904" href="Pat.Substitution.html#1858" class="Bound">σ₁</a><a id="1906" class="Symbol">)</a>
<a id="1908" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="1915" href="Pat.Substitution.html#1915" class="Bound">σᵈ</a> <a id="1918" href="Pat.Term.html#6968" class="InductiveConstructor">`true</a> <a id="1924" class="Symbol">=</a> <a id="1926" href="Pat.Term.html#6968" class="InductiveConstructor">`true</a>
<a id="1932" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="1939" href="Pat.Substitution.html#1939" class="Bound">σᵈ</a> <a id="1942" href="Pat.Term.html#7036" class="InductiveConstructor">`false</a> <a id="1949" class="Symbol">=</a> <a id="1951" href="Pat.Term.html#7036" class="InductiveConstructor">`false</a>
<a id="1958" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="1965" href="Pat.Substitution.html#1965" class="Bound">σᵈ</a> <a id="1968" class="Symbol">(</a><a id="1969" href="Pat.Term.html#7102" class="InductiveConstructor Operator">`if</a> <a id="1973" href="Pat.Substitution.html#1973" class="Bound">e₁</a> <a id="1976" href="Pat.Term.html#7102" class="InductiveConstructor Operator">`then</a> <a id="1982" href="Pat.Substitution.html#1982" class="Bound">e₂</a> <a id="1985" href="Pat.Term.html#7102" class="InductiveConstructor Operator">`else</a> <a id="1991" href="Pat.Substitution.html#1991" class="Bound">e₃</a><a id="1993" class="Symbol">)</a> <a id="1995" class="Symbol">=</a> <a id="1997" href="Pat.Term.html#7102" class="InductiveConstructor Operator">`if</a> <a id="2001" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2008" href="Pat.Substitution.html#1965" class="Bound">σᵈ</a> <a id="2011" href="Pat.Substitution.html#1973" class="Bound">e₁</a> <a id="2014" href="Pat.Term.html#7102" class="InductiveConstructor Operator">`then</a> <a id="2020" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2027" href="Pat.Substitution.html#1965" class="Bound">σᵈ</a> <a id="2030" href="Pat.Substitution.html#1982" class="Bound">e₂</a> <a id="2033" href="Pat.Term.html#7102" class="InductiveConstructor Operator">`else</a> <a id="2039" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2046" href="Pat.Substitution.html#1965" class="Bound">σᵈ</a> <a id="2049" href="Pat.Substitution.html#1991" class="Bound">e₃</a>
<a id="2052" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2059" href="Pat.Substitution.html#2059" class="Bound">σᵈ</a> <a id="2062" class="Symbol">(</a><a id="2063" href="Pat.Term.html#7251" class="InductiveConstructor Operator">`λ⟨</a> <a id="2067" href="Pat.Substitution.html#2067" class="Bound">Δ</a> <a id="2069" href="Pat.Term.html#7251" class="InductiveConstructor Operator">⟩</a> <a id="2071" href="Pat.Substitution.html#2071" class="Bound">e</a><a id="2072" class="Symbol">)</a> <a id="2074" class="Symbol">=</a> <a id="2076" href="Pat.Term.html#7251" class="InductiveConstructor Operator">`λ⟨</a> <a id="2080" href="Pat.Substitution.html#2067" class="Bound">Δ</a> <a id="2082" href="Pat.Term.html#7251" class="InductiveConstructor Operator">⟩</a> <a id="2084" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2091" class="Symbol">(</a><a id="2092" href="Pat.Depth.html#5717" class="Function">extsᵈ</a> <a id="2098" href="Pat.Substitution.html#2059" class="Bound">σᵈ</a><a id="2100" class="Symbol">)</a> <a id="2102" href="Pat.Substitution.html#2071" class="Bound">e</a>
<a id="2104" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2111" href="Pat.Substitution.html#2111" class="Bound">σᵈ</a> <a id="2114" class="Symbol">(</a><a id="2115" href="Pat.Substitution.html#2115" class="Bound">e₁</a> <a id="2118" href="Pat.Term.html#7402" class="InductiveConstructor Operator">·</a> <a id="2120" href="Pat.Substitution.html#2120" class="Bound">e₂</a><a id="2122" class="Symbol">)</a> <a id="2124" class="Symbol">=</a> <a id="2126" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2133" href="Pat.Substitution.html#2111" class="Bound">σᵈ</a> <a id="2136" href="Pat.Substitution.html#2115" class="Bound">e₁</a> <a id="2139" href="Pat.Term.html#7402" class="InductiveConstructor Operator">·</a> <a id="2141" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2148" class="Symbol">(</a><a id="2149" href="Pat.Depth.html#5852" class="Function">exts++ᵈ</a> <a id="2157" class="Symbol">_</a> <a id="2159" href="Pat.Substitution.html#2111" class="Bound">σᵈ</a><a id="2161" class="Symbol">)</a> <a id="2163" href="Pat.Substitution.html#2120" class="Bound">e₂</a>
<a id="2166" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2173" href="Pat.Substitution.html#2173" class="Bound">σᵈ</a> <a id="2176" href="Pat.Term.html#7533" class="InductiveConstructor Operator">⟨</a> <a id="2178" href="Pat.Substitution.html#2178" class="Bound">e</a> <a id="2180" href="Pat.Term.html#7533" class="InductiveConstructor Operator">⟩</a> <a id="2182" class="Symbol">=</a> <a id="2184" href="Pat.Term.html#7533" class="InductiveConstructor Operator">⟨</a> <a id="2186" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2193" class="Symbol">(</a><a id="2194" href="Pat.Depth.html#5983" class="Function">exts↾ᵈ</a> <a id="2201" href="Pat.Substitution.html#2173" class="Bound">σᵈ</a><a id="2203" class="Symbol">)</a> <a id="2205" href="Pat.Substitution.html#2178" class="Bound">e</a> <a id="2207" href="Pat.Term.html#7533" class="InductiveConstructor Operator">⟩</a>
<a id="2209" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2216" href="Pat.Substitution.html#2216" class="Bound">σᵈ</a> <a id="2219" class="Symbol">(</a><a id="2220" href="Pat.Term.html#7627" class="InductiveConstructor Operator">`let⟨</a> <a id="2226" href="Pat.Substitution.html#2226" class="Bound">Δ</a> <a id="2228" href="Pat.Term.html#7627" class="InductiveConstructor Operator">⟩</a> <a id="2230" href="Pat.Substitution.html#2230" class="Bound">e₁</a> <a id="2233" href="Pat.Substitution.html#2233" class="Bound">e₂</a><a id="2235" class="Symbol">)</a> <a id="2237" class="Symbol">=</a> <a id="2239" href="Pat.Term.html#7627" class="InductiveConstructor Operator">`let⟨</a> <a id="2245" href="Pat.Substitution.html#2226" class="Bound">Δ</a> <a id="2247" href="Pat.Term.html#7627" class="InductiveConstructor Operator">⟩</a> <a id="2249" class="Symbol">(</a><a id="2250" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2257" class="Symbol">(</a><a id="2258" href="Pat.Depth.html#5852" class="Function">exts++ᵈ</a> <a id="2266" class="Symbol">(</a><a id="2267" href="Data.StagedList.html#2668" class="Function">inject₁</a> <a id="2275" href="Pat.Substitution.html#2226" class="Bound">Δ</a><a id="2276" class="Symbol">)</a> <a id="2278" href="Pat.Substitution.html#2216" class="Bound">σᵈ</a><a id="2280" class="Symbol">)</a> <a id="2282" href="Pat.Substitution.html#2230" class="Bound">e₁</a><a id="2284" class="Symbol">)</a> <a id="2286" class="Symbol">(</a><a id="2287" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2294" class="Symbol">(</a><a id="2295" href="Pat.Depth.html#5717" class="Function">extsᵈ</a> <a id="2301" href="Pat.Substitution.html#2216" class="Bound">σᵈ</a><a id="2303" class="Symbol">)</a> <a id="2305" href="Pat.Substitution.html#2233" class="Bound">e₂</a><a id="2307" class="Symbol">)</a>
<a id="2309" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2316" href="Pat.Substitution.html#2316" class="Bound">σᵈ</a> <a id="2319" class="Symbol">(</a><a id="2320" href="Pat.Term.html#7812" class="InductiveConstructor">`wrap</a> <a id="2326" href="Pat.Substitution.html#2326" class="Bound">Δ</a> <a id="2328" href="Pat.Substitution.html#2328" class="Bound">e</a><a id="2329" class="Symbol">)</a> <a id="2331" class="Symbol">=</a> <a id="2333" href="Pat.Term.html#7812" class="InductiveConstructor">`wrap</a> <a id="2339" href="Pat.Substitution.html#2326" class="Bound">Δ</a> <a id="2341" class="Symbol">(</a><a id="2342" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2349" class="Symbol">(</a><a id="2350" href="Pat.Depth.html#5852" class="Function">exts++ᵈ</a> <a id="2358" class="Symbol">(</a><a id="2359" href="Data.StagedList.html#2668" class="Function">inject₁</a> <a id="2367" href="Pat.Substitution.html#2326" class="Bound">Δ</a><a id="2368" class="Symbol">)</a> <a id="2370" href="Pat.Substitution.html#2316" class="Bound">σᵈ</a><a id="2372" class="Symbol">)</a> <a id="2374" href="Pat.Substitution.html#2328" class="Bound">e</a><a id="2375" class="Symbol">)</a>
<a id="2377" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2384" href="Pat.Substitution.html#2384" class="Bound">σᵈ</a> <a id="2387" class="Symbol">(</a><a id="2388" href="Pat.Term.html#7933" class="InductiveConstructor">`letwrap</a> <a id="2397" href="Pat.Substitution.html#2397" class="Bound">Δ</a> <a id="2399" href="Pat.Substitution.html#2399" class="Bound">e₁</a> <a id="2402" href="Pat.Substitution.html#2402" class="Bound">e₂</a><a id="2404" class="Symbol">)</a> <a id="2406" class="Symbol">=</a> <a id="2408" href="Pat.Term.html#7933" class="InductiveConstructor">`letwrap</a> <a id="2417" href="Pat.Substitution.html#2397" class="Bound">Δ</a> <a id="2419" class="Symbol">(</a><a id="2420" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2427" href="Pat.Substitution.html#2384" class="Bound">σᵈ</a> <a id="2430" href="Pat.Substitution.html#2399" class="Bound">e₁</a><a id="2432" class="Symbol">)</a> <a id="2434" class="Symbol">(</a><a id="2435" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2442" class="Symbol">(</a><a id="2443" href="Pat.Depth.html#5717" class="Function">extsᵈ</a> <a id="2449" href="Pat.Substitution.html#2384" class="Bound">σᵈ</a><a id="2451" class="Symbol">)</a> <a id="2453" href="Pat.Substitution.html#2402" class="Bound">e₂</a><a id="2455" class="Symbol">)</a>
<a id="2457" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2464" href="Pat.Substitution.html#2464" class="Bound">σᵈ</a> <a id="2467" class="Symbol">(</a><a id="2468" href="Pat.Term.html#8109" class="InductiveConstructor Operator">`iflet⟨</a> <a id="2476" href="Pat.Substitution.html#2476" class="Bound">Δ</a> <a id="2478" href="Pat.Term.html#8109" class="InductiveConstructor Operator">⟩</a> <a id="2480" href="Pat.Substitution.html#2480" class="Bound">p</a> <a id="2482" href="Pat.Substitution.html#2482" class="Bound">e₁</a> <a id="2485" href="Pat.Substitution.html#2485" class="Bound">e₂</a> <a id="2488" href="Pat.Substitution.html#2488" class="Bound">e₃</a><a id="2490" class="Symbol">)</a> <a id="2492" class="Symbol">=</a>
  <a id="2496" href="Pat.Term.html#8109" class="InductiveConstructor Operator">`iflet⟨</a> <a id="2504" href="Pat.Substitution.html#2476" class="Bound">Δ</a> <a id="2506" href="Pat.Term.html#8109" class="InductiveConstructor Operator">⟩</a>
    <a id="2512" class="Symbol">(</a><a id="2513" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="2527" class="Symbol">(</a><a id="2528" href="Pat.Depth.html#5983" class="Function">exts↾ᵈ</a> <a id="2535" href="Pat.Substitution.html#2464" class="Bound">σᵈ</a><a id="2537" class="Symbol">)</a> <a id="2539" href="Pat.Substitution.html#2480" class="Bound">p</a><a id="2540" class="Symbol">)</a> 
    <a id="2547" class="Symbol">(</a><a id="2548" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2555" class="Symbol">(</a><a id="2556" href="Pat.Depth.html#5852" class="Function">exts++ᵈ</a> <a id="2564" class="Symbol">(</a><a id="2565" href="Data.StagedList.html#2668" class="Function">inject₁</a> <a id="2573" href="Pat.Substitution.html#2476" class="Bound">Δ</a><a id="2574" class="Symbol">)</a> <a id="2576" href="Pat.Substitution.html#2464" class="Bound">σᵈ</a><a id="2578" class="Symbol">)</a> <a id="2580" href="Pat.Substitution.html#2482" class="Bound">e₁</a><a id="2582" class="Symbol">)</a> 
    <a id="2589" class="Symbol">(</a><a id="2590" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2597" class="Symbol">(</a><a id="2598" href="Pat.Depth.html#5852" class="Function">exts++ᵈ</a> <a id="2606" class="Symbol">(</a><a id="2607" href="Data.StagedList.html#2668" class="Function">inject₁</a> <a id="2615" class="Symbol">_)</a> <a id="2618" href="Pat.Substitution.html#2464" class="Bound">σᵈ</a><a id="2620" class="Symbol">)</a> <a id="2622" href="Pat.Substitution.html#2485" class="Bound">e₂</a><a id="2624" class="Symbol">)</a>
    <a id="2630" class="Symbol">(</a><a id="2631" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2638" href="Pat.Substitution.html#2464" class="Bound">σᵈ</a> <a id="2641" href="Pat.Substitution.html#2488" class="Bound">e₃</a><a id="2643" class="Symbol">)</a>
<a id="2645" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2652" href="Pat.Substitution.html#2652" class="Bound">σᵈ</a> <a id="2655" class="Symbol">(</a><a id="2656" href="Pat.Term.html#8342" class="InductiveConstructor">`rewrite</a> <a id="2665" href="Pat.Substitution.html#2665" class="Bound">e₁</a> <a id="2668" href="Pat.Substitution.html#2668" class="Bound">p</a> <a id="2670" href="Pat.Substitution.html#2670" class="Bound">e₂</a><a id="2672" class="Symbol">)</a> <a id="2674" class="Symbol">=</a> <a id="2676" href="Pat.Term.html#8342" class="InductiveConstructor">`rewrite</a> <a id="2685" class="Symbol">(</a><a id="2686" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2693" href="Pat.Substitution.html#2652" class="Bound">σᵈ</a> <a id="2696" href="Pat.Substitution.html#2665" class="Bound">e₁</a><a id="2698" class="Symbol">)</a> <a id="2700" class="Symbol">(</a><a id="2701" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="2715" class="Symbol">(</a><a id="2716" href="Pat.Depth.html#5983" class="Function">exts↾ᵈ</a> <a id="2723" href="Pat.Substitution.html#2652" class="Bound">σᵈ</a><a id="2725" class="Symbol">)</a> <a id="2727" href="Pat.Substitution.html#2668" class="Bound">p</a><a id="2728" class="Symbol">)</a> <a id="2730" class="Symbol">(</a><a id="2731" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2738" class="Symbol">(</a><a id="2739" href="Pat.Depth.html#5852" class="Function">exts++ᵈ</a> <a id="2747" class="Symbol">(</a><a id="2748" href="Data.StagedList.html#2668" class="Function">inject₁</a> <a id="2756" class="Symbol">_)</a> <a id="2759" href="Pat.Substitution.html#2652" class="Bound">σᵈ</a><a id="2761" class="Symbol">)</a> <a id="2763" href="Pat.Substitution.html#2670" class="Bound">e₂</a><a id="2765" class="Symbol">)</a>

<a id="2768" href="Pat.Substitution.html#854" class="Function">substSubstᵈ</a> <a id="2780" href="Pat.Substitution.html#2780" class="Bound">σᵈ</a> <a id="2783" href="Pat.Term.html#1468" class="InductiveConstructor">∅</a> <a id="2785" class="Symbol">=</a> <a id="2787" href="Pat.Term.html#1468" class="InductiveConstructor">∅</a>
<a id="2789" href="Pat.Substitution.html#854" class="Function">substSubstᵈ</a> <a id="2801" href="Pat.Substitution.html#2801" class="Bound">σᵈ</a> <a id="2804" class="Symbol">(</a><a id="2805" href="Pat.Substitution.html#2805" class="Bound">σ′</a> <a id="2808" href="Pat.Term.html#1481" class="InductiveConstructor Operator">,</a> <a id="2810" href="Pat.Substitution.html#2810" class="Bound">item</a><a id="2814" class="Symbol">)</a> <a id="2816" class="Symbol">=</a> <a id="2818" href="Pat.Substitution.html#854" class="Function">substSubstᵈ</a> <a id="2830" href="Pat.Substitution.html#2801" class="Bound">σᵈ</a> <a id="2833" href="Pat.Substitution.html#2805" class="Bound">σ′</a> <a id="2836" href="Pat.Term.html#1481" class="InductiveConstructor Operator">,</a> <a id="2838" href="Pat.Substitution.html#918" class="Function">substSubstItemᵈ</a> <a id="2854" href="Pat.Substitution.html#2801" class="Bound">σᵈ</a> <a id="2857" href="Pat.Substitution.html#2810" class="Bound">item</a>
<a id="2862" href="Pat.Substitution.html#854" class="Function">substSubstᵈ</a> <a id="2874" href="Pat.Substitution.html#2874" class="Bound">σᵈ</a> <a id="2877" class="Symbol">(</a><a id="2878" href="Pat.Substitution.html#2878" class="Bound">σ₁</a> <a id="2881" href="Pat.Term.html#1560" class="InductiveConstructor Operator">++ˢ</a> <a id="2885" href="Pat.Substitution.html#2885" class="Bound">σ₂</a><a id="2887" class="Symbol">)</a> <a id="2889" class="Symbol">=</a> <a id="2891" href="Pat.Substitution.html#854" class="Function">substSubstᵈ</a> <a id="2903" href="Pat.Substitution.html#2874" class="Bound">σᵈ</a> <a id="2906" href="Pat.Substitution.html#2878" class="Bound">σ₁</a> <a id="2909" href="Pat.Term.html#1560" class="InductiveConstructor Operator">++ˢ</a> <a id="2913" href="Pat.Substitution.html#854" class="Function">substSubstᵈ</a> <a id="2925" href="Pat.Substitution.html#2874" class="Bound">σᵈ</a> <a id="2928" href="Pat.Substitution.html#2885" class="Bound">σ₂</a>

<a id="2932" href="Pat.Substitution.html#918" class="Function">substSubstItemᵈ</a> <a id="2948" class="Symbol">{</a><a id="2949" class="Argument">Δ</a> <a id="2951" class="Symbol">=</a> <a id="2953" href="Pat.Substitution.html#2953" class="Bound">Δ</a><a id="2954" class="Symbol">}</a> <a id="2956" class="Symbol">{</a><a id="2957" class="Argument">m≥n</a> <a id="2961" class="Symbol">=</a> <a id="2963" href="Pat.Substitution.html#2963" class="Bound">m≥n</a><a id="2966" class="Symbol">}</a> <a id="2968" href="Pat.Substitution.html#2968" class="Bound">σᵈ</a> <a id="2971" class="Symbol">(</a><a id="2972" href="Pat.Term.html#1045" class="InductiveConstructor">term</a> <a id="2977" href="Pat.Substitution.html#2977" class="Bound">e</a><a id="2978" class="Symbol">)</a> <a id="2980" class="Symbol">=</a> <a id="2982" href="Pat.Term.html#1045" class="InductiveConstructor">term</a> <a id="2987" class="Symbol">(</a><a id="2988" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="2995" class="Symbol">(</a><a id="2996" href="Pat.Depth.html#5852" class="Function">exts++ᵈ</a> <a id="3004" href="Pat.Substitution.html#2953" class="Bound">Δ</a> <a id="3006" class="Symbol">(</a><a id="3007" href="Pat.Depth.html#6337" class="Function">exts↾≥ᵈ</a> <a id="3015" href="Pat.Substitution.html#2963" class="Bound">m≥n</a> <a id="3019" href="Pat.Substitution.html#2968" class="Bound">σᵈ</a><a id="3021" class="Symbol">))</a> <a id="3024" href="Pat.Substitution.html#2977" class="Bound">e</a><a id="3025" class="Symbol">)</a>
<a id="3027" href="Pat.Substitution.html#918" class="Function">substSubstItemᵈ</a> <a id="3043" class="Symbol">{</a><a id="3044" class="Argument">σ</a> <a id="3046" class="Symbol">=</a> <a id="3048" href="Pat.Substitution.html#3048" class="Bound">σ</a><a id="3049" class="Symbol">}</a> <a id="3051" href="Pat.Substitution.html#3051" class="Bound">σᵈ</a> <a id="3054" class="Symbol">(</a><a id="3055" href="Pat.Term.html#1148" class="InductiveConstructor">var</a> <a id="3059" href="Pat.Substitution.html#3059" class="Bound">x</a><a id="3060" class="Symbol">)</a> <a id="3062" class="Symbol">=</a> <a id="3064" href="Pat.Term.html#1663" class="Function">lookup</a> <a id="3071" href="Pat.Substitution.html#3048" class="Bound">σ</a> <a id="3073" href="Pat.Substitution.html#3059" class="Bound">x</a>

<a id="3076" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3090" href="Pat.Substitution.html#3090" class="Bound">σᵈ</a> <a id="3093" href="Pat.Term.html#4185" class="InductiveConstructor">`pat</a> <a id="3098" class="Symbol">=</a> <a id="3100" href="Pat.Term.html#4185" class="InductiveConstructor">`pat</a>
<a id="3105" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3119" href="Pat.Substitution.html#3119" class="Bound">σᵈ</a> <a id="3122" class="Symbol">(</a><a id="3123" href="Pat.Term.html#4307" class="InductiveConstructor Operator">`</a> <a id="3125" href="Pat.Substitution.html#3125" class="Bound">x</a> <a id="3127" href="Pat.Term.html#4307" class="InductiveConstructor Operator">`with₁</a> <a id="3134" href="Pat.Substitution.html#3134" class="Bound">σ₁</a><a id="3136" class="Symbol">)</a> <a id="3138" class="Symbol">=</a> <a id="3140" href="Pat.Matching.html#4227" class="Function">toPattern</a> <a id="3150" href="Function.Base.html#704" class="Function">id</a> <a id="3153" class="Symbol">(</a><a id="3154" href="Pat.Substitution.html#1611" class="Function">useItemᵈ</a> <a id="3163" class="Symbol">(</a><a id="3164" href="Pat.Depth.html#4954" class="Function">renameSubstItemᵈ</a> <a id="3181" href="Data.StagedList.html#5960" class="InductiveConstructor">L</a> <a id="3183" class="Symbol">(</a><a id="3184" href="Pat.Depth.html#4172" class="Function">lookupᵈ</a> <a id="3192" href="Pat.Substitution.html#3119" class="Bound">σᵈ</a> <a id="3195" href="Pat.Substitution.html#3125" class="Bound">x</a><a id="3196" class="Symbol">))</a> <a id="3199" class="Symbol">(</a><a id="3200" href="Pat.Substitution.html#854" class="Function">substSubstᵈ</a> <a id="3212" class="Symbol">(</a><a id="3213" href="Pat.Depth.html#5852" class="Function">exts++ᵈ</a> <a id="3221" class="Symbol">_</a> <a id="3223" href="Pat.Substitution.html#3119" class="Bound">σᵈ</a><a id="3225" class="Symbol">)</a> <a id="3227" href="Pat.Substitution.html#3134" class="Bound">σ₁</a><a id="3229" class="Symbol">))</a>
<a id="3232" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3246" href="Pat.Substitution.html#3246" class="Bound">σᵈ</a> <a id="3249" class="Symbol">(</a><a id="3250" href="Pat.Term.html#4466" class="InductiveConstructor Operator">`</a> <a id="3252" href="Pat.Substitution.html#3252" class="Bound">x</a> <a id="3254" href="Pat.Term.html#4466" class="InductiveConstructor Operator">`with₂</a> <a id="3261" href="Pat.Substitution.html#3261" class="Bound">π</a><a id="3262" class="Symbol">)</a> <a id="3264" class="Symbol">=</a> <a id="3266" href="Pat.Term.html#4466" class="InductiveConstructor Operator">`</a> <a id="3268" href="Pat.Substitution.html#3252" class="Bound">x</a> <a id="3270" href="Pat.Term.html#4466" class="InductiveConstructor Operator">`with₂</a> <a id="3277" href="Pat.Substitution.html#1102" class="Function">substSubstPatternᵈ</a> <a id="3296" href="Pat.Substitution.html#3246" class="Bound">σᵈ</a> <a id="3299" href="Pat.Substitution.html#3261" class="Bound">π</a>
<a id="3301" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3315" href="Pat.Substitution.html#3315" class="Bound">σᵈ</a> <a id="3318" href="Pat.Term.html#4623" class="InductiveConstructor">`true</a> <a id="3324" class="Symbol">=</a> <a id="3326" href="Pat.Term.html#4623" class="InductiveConstructor">`true</a>
<a id="3332" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3346" href="Pat.Substitution.html#3346" class="Bound">σᵈ</a> <a id="3349" href="Pat.Term.html#4708" class="InductiveConstructor">`false</a> <a id="3356" class="Symbol">=</a> <a id="3358" href="Pat.Term.html#4708" class="InductiveConstructor">`false</a>
<a id="3365" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3379" href="Pat.Substitution.html#3379" class="Bound">σᵈ</a> <a id="3382" class="Symbol">(</a><a id="3383" href="Pat.Term.html#4791" class="InductiveConstructor Operator">`if</a> <a id="3387" href="Pat.Substitution.html#3387" class="Bound">p</a> <a id="3389" href="Pat.Term.html#4791" class="InductiveConstructor Operator">`then</a> <a id="3395" href="Pat.Substitution.html#3395" class="Bound">p₁</a> <a id="3398" href="Pat.Term.html#4791" class="InductiveConstructor Operator">`else</a> <a id="3404" href="Pat.Substitution.html#3404" class="Bound">p₂</a><a id="3406" class="Symbol">)</a> <a id="3408" class="Symbol">=</a> <a id="3410" href="Pat.Term.html#4791" class="InductiveConstructor Operator">`if</a> <a id="3414" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3428" href="Pat.Substitution.html#3379" class="Bound">σᵈ</a> <a id="3431" href="Pat.Substitution.html#3387" class="Bound">p</a> <a id="3433" href="Pat.Term.html#4791" class="InductiveConstructor Operator">`then</a> <a id="3439" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3453" href="Pat.Substitution.html#3379" class="Bound">σᵈ</a> <a id="3456" href="Pat.Substitution.html#3395" class="Bound">p₁</a> <a id="3459" href="Pat.Term.html#4791" class="InductiveConstructor Operator">`else</a> <a id="3465" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3479" href="Pat.Substitution.html#3379" class="Bound">σᵈ</a> <a id="3482" href="Pat.Substitution.html#3404" class="Bound">p₂</a>
<a id="3485" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3499" href="Pat.Substitution.html#3499" class="Bound">σᵈ</a> <a id="3502" class="Symbol">(</a><a id="3503" href="Pat.Term.html#5008" class="InductiveConstructor Operator">`λ⟨</a> <a id="3507" href="Pat.Substitution.html#3507" class="Bound">Δ′</a> <a id="3510" href="Pat.Term.html#5008" class="InductiveConstructor Operator">⟩</a> <a id="3512" href="Pat.Substitution.html#3512" class="Bound">p</a><a id="3513" class="Symbol">)</a> <a id="3515" class="Symbol">=</a> <a id="3517" href="Pat.Term.html#5008" class="InductiveConstructor Operator">`λ⟨</a> <a id="3521" href="Pat.Substitution.html#3507" class="Bound">Δ′</a> <a id="3524" href="Pat.Term.html#5008" class="InductiveConstructor Operator">⟩</a> <a id="3526" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3540" href="Pat.Substitution.html#3499" class="Bound">σᵈ</a> <a id="3543" href="Pat.Substitution.html#3512" class="Bound">p</a>
<a id="3545" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3559" href="Pat.Substitution.html#3559" class="Bound">σᵈ</a> <a id="3562" class="Symbol">(</a><a id="3563" href="Pat.Substitution.html#3563" class="Bound">p₁</a> <a id="3566" href="Pat.Term.html#5188" class="InductiveConstructor Operator">·</a> <a id="3568" href="Pat.Substitution.html#3568" class="Bound">p₂</a><a id="3570" class="Symbol">)</a> <a id="3572" class="Symbol">=</a> <a id="3574" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3588" href="Pat.Substitution.html#3559" class="Bound">σᵈ</a> <a id="3591" href="Pat.Substitution.html#3563" class="Bound">p₁</a> <a id="3594" href="Pat.Term.html#5188" class="InductiveConstructor Operator">·</a> <a id="3596" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3610" href="Pat.Substitution.html#3559" class="Bound">σᵈ</a> <a id="3613" href="Pat.Substitution.html#3568" class="Bound">p₂</a>
<a id="3616" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3630" href="Pat.Substitution.html#3630" class="Bound">σᵈ</a> <a id="3633" class="Symbol">(</a><a id="3634" href="Pat.Term.html#5369" class="InductiveConstructor Operator">⟨</a> <a id="3636" href="Pat.Substitution.html#3636" class="Bound">p</a> <a id="3638" href="Pat.Term.html#5369" class="InductiveConstructor Operator">⟩</a><a id="3639" class="Symbol">)</a> <a id="3641" class="Symbol">=</a> <a id="3643" href="Pat.Term.html#5369" class="InductiveConstructor Operator">⟨</a> <a id="3645" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3659" class="Symbol">(</a><a id="3660" href="Pat.Depth.html#5983" class="Function">exts↾ᵈ</a> <a id="3667" href="Pat.Substitution.html#3630" class="Bound">σᵈ</a><a id="3669" class="Symbol">)</a> <a id="3671" href="Pat.Substitution.html#3636" class="Bound">p</a> <a id="3673" href="Pat.Term.html#5369" class="InductiveConstructor Operator">⟩</a>
<a id="3675" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3689" href="Pat.Substitution.html#3689" class="Bound">σᵈ</a> <a id="3692" class="Symbol">(</a><a id="3693" href="Pat.Term.html#5509" class="InductiveConstructor Operator">`let⟨</a> <a id="3699" href="Pat.Substitution.html#3699" class="Bound">Δ′</a> <a id="3702" href="Pat.Term.html#5509" class="InductiveConstructor Operator">⟩</a> <a id="3704" href="Pat.Substitution.html#3704" class="Bound">p₁</a> <a id="3707" href="Pat.Substitution.html#3707" class="Bound">p₂</a><a id="3709" class="Symbol">)</a> <a id="3711" class="Symbol">=</a> <a id="3713" href="Pat.Term.html#5509" class="InductiveConstructor Operator">`let⟨</a> <a id="3719" href="Pat.Substitution.html#3699" class="Bound">Δ′</a> <a id="3722" href="Pat.Term.html#5509" class="InductiveConstructor Operator">⟩</a> <a id="3724" class="Symbol">(</a><a id="3725" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3739" href="Pat.Substitution.html#3689" class="Bound">σᵈ</a> <a id="3742" href="Pat.Substitution.html#3704" class="Bound">p₁</a><a id="3744" class="Symbol">)</a> <a id="3746" class="Symbol">(</a><a id="3747" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3761" href="Pat.Substitution.html#3689" class="Bound">σᵈ</a> <a id="3764" href="Pat.Substitution.html#3707" class="Bound">p₂</a><a id="3766" class="Symbol">)</a>
<a id="3768" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3782" href="Pat.Substitution.html#3782" class="Bound">σᵈ</a> <a id="3785" class="Symbol">(</a><a id="3786" href="Pat.Term.html#5747" class="InductiveConstructor">`wrap</a> <a id="3792" href="Pat.Substitution.html#3792" class="Bound">Δ′</a> <a id="3795" href="Pat.Substitution.html#3795" class="Bound">p</a><a id="3796" class="Symbol">)</a> <a id="3798" class="Symbol">=</a> <a id="3800" href="Pat.Term.html#5747" class="InductiveConstructor">`wrap</a> <a id="3806" href="Pat.Substitution.html#3792" class="Bound">Δ′</a> <a id="3809" class="Symbol">(</a><a id="3810" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3824" href="Pat.Substitution.html#3782" class="Bound">σᵈ</a> <a id="3827" href="Pat.Substitution.html#3795" class="Bound">p</a><a id="3828" class="Symbol">)</a>
<a id="3830" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3844" href="Pat.Substitution.html#3844" class="Bound">σᵈ</a> <a id="3847" class="Symbol">(</a><a id="3848" href="Pat.Term.html#5887" class="InductiveConstructor">`letwrap</a> <a id="3857" href="Pat.Substitution.html#3857" class="Bound">Δ′</a> <a id="3860" href="Pat.Substitution.html#3860" class="Bound">p₁</a> <a id="3863" href="Pat.Substitution.html#3863" class="Bound">p₂</a><a id="3865" class="Symbol">)</a> <a id="3867" class="Symbol">=</a> <a id="3869" href="Pat.Term.html#5887" class="InductiveConstructor">`letwrap</a> <a id="3878" href="Pat.Substitution.html#3857" class="Bound">Δ′</a> <a id="3881" class="Symbol">(</a><a id="3882" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3896" href="Pat.Substitution.html#3844" class="Bound">σᵈ</a> <a id="3899" href="Pat.Substitution.html#3860" class="Bound">p₁</a><a id="3901" class="Symbol">)</a> <a id="3903" class="Symbol">(</a><a id="3904" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3918" href="Pat.Substitution.html#3844" class="Bound">σᵈ</a> <a id="3921" href="Pat.Substitution.html#3863" class="Bound">p₂</a><a id="3923" class="Symbol">)</a>
<a id="3925" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="3939" href="Pat.Substitution.html#3939" class="Bound">σᵈ</a> <a id="3942" class="Symbol">(</a><a id="3943" href="Pat.Term.html#6102" class="InductiveConstructor Operator">`iflet⟨</a> <a id="3951" href="Pat.Substitution.html#3951" class="Bound">Δ′</a> <a id="3954" href="Pat.Term.html#6102" class="InductiveConstructor Operator">⟩</a> <a id="3956" href="Pat.Substitution.html#3956" class="Bound">p</a> <a id="3958" href="Pat.Substitution.html#3958" class="Bound">p₁</a> <a id="3961" href="Pat.Substitution.html#3961" class="Bound">p₂</a> <a id="3964" href="Pat.Substitution.html#3964" class="Bound">p₃</a><a id="3966" class="Symbol">)</a> <a id="3968" class="Symbol">=</a>
  <a id="3972" href="Pat.Term.html#6102" class="InductiveConstructor Operator">`iflet⟨</a> <a id="3980" href="Pat.Substitution.html#3951" class="Bound">Δ′</a> <a id="3983" href="Pat.Term.html#6102" class="InductiveConstructor Operator">⟩</a>
    <a id="3989" class="Symbol">(</a><a id="3990" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="4004" class="Symbol">(</a><a id="4005" href="Pat.Depth.html#5852" class="Function">exts++ᵈ</a> <a id="4013" class="Symbol">_</a> <a id="4015" class="Symbol">(</a><a id="4016" href="Pat.Depth.html#5983" class="Function">exts↾ᵈ</a> <a id="4023" href="Pat.Substitution.html#3939" class="Bound">σᵈ</a><a id="4025" class="Symbol">))</a> <a id="4028" href="Pat.Substitution.html#3956" class="Bound">p</a><a id="4029" class="Symbol">)</a>
    <a id="4035" class="Symbol">(</a><a id="4036" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="4050" href="Pat.Substitution.html#3939" class="Bound">σᵈ</a> <a id="4053" href="Pat.Substitution.html#3958" class="Bound">p₁</a><a id="4055" class="Symbol">)</a>
    <a id="4061" class="Symbol">(</a><a id="4062" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="4076" href="Pat.Substitution.html#3939" class="Bound">σᵈ</a> <a id="4079" href="Pat.Substitution.html#3961" class="Bound">p₂</a><a id="4081" class="Symbol">)</a>
    <a id="4087" class="Symbol">(</a><a id="4088" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="4102" href="Pat.Substitution.html#3939" class="Bound">σᵈ</a> <a id="4105" href="Pat.Substitution.html#3964" class="Bound">p₃</a><a id="4107" class="Symbol">)</a>
<a id="4109" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="4123" href="Pat.Substitution.html#4123" class="Bound">σᵈ</a> <a id="4126" class="Symbol">(</a><a id="4127" href="Pat.Term.html#6413" class="InductiveConstructor">`rewrite</a> <a id="4136" href="Pat.Substitution.html#4136" class="Bound">p₁</a> <a id="4139" href="Pat.Substitution.html#4139" class="Bound">p</a> <a id="4141" href="Pat.Substitution.html#4141" class="Bound">p₂</a><a id="4143" class="Symbol">)</a> <a id="4145" class="Symbol">=</a> <a id="4147" href="Pat.Term.html#6413" class="InductiveConstructor">`rewrite</a> <a id="4156" class="Symbol">(</a><a id="4157" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="4171" href="Pat.Substitution.html#4123" class="Bound">σᵈ</a> <a id="4174" href="Pat.Substitution.html#4136" class="Bound">p₁</a><a id="4176" class="Symbol">)</a> <a id="4178" class="Symbol">(</a><a id="4179" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="4193" class="Symbol">(</a><a id="4194" href="Pat.Depth.html#5852" class="Function">exts++ᵈ</a> <a id="4202" class="Symbol">_</a> <a id="4204" class="Symbol">(</a><a id="4205" href="Pat.Depth.html#5983" class="Function">exts↾ᵈ</a> <a id="4212" href="Pat.Substitution.html#4123" class="Bound">σᵈ</a><a id="4214" class="Symbol">))</a> <a id="4217" href="Pat.Substitution.html#4139" class="Bound">p</a><a id="4218" class="Symbol">)</a> <a id="4220" class="Symbol">(</a><a id="4221" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="4235" href="Pat.Substitution.html#4123" class="Bound">σᵈ</a> <a id="4238" href="Pat.Substitution.html#4141" class="Bound">p₂</a><a id="4240" class="Symbol">)</a>

<a id="4243" href="Pat.Substitution.html#1102" class="Function">substSubstPatternᵈ</a> <a id="4262" href="Pat.Substitution.html#4262" class="Bound">σᵈ</a> <a id="4265" href="Pat.Term.html#3605" class="InductiveConstructor">∅</a> <a id="4267" class="Symbol">=</a> <a id="4269" href="Pat.Term.html#3605" class="InductiveConstructor">∅</a>
<a id="4271" href="Pat.Substitution.html#1102" class="Function">substSubstPatternᵈ</a> <a id="4290" href="Pat.Substitution.html#4290" class="Bound">σᵈ</a> <a id="4293" class="Symbol">(</a><a id="4294" href="Pat.Substitution.html#4294" class="Bound">σ</a> <a id="4296" href="Pat.Term.html#3626" class="InductiveConstructor Operator">,</a> <a id="4298" href="Pat.Substitution.html#4298" class="Bound">item</a><a id="4302" class="Symbol">)</a> <a id="4304" class="Symbol">=</a> <a id="4306" href="Pat.Substitution.html#1102" class="Function">substSubstPatternᵈ</a> <a id="4325" href="Pat.Substitution.html#4290" class="Bound">σᵈ</a> <a id="4328" href="Pat.Substitution.html#4294" class="Bound">σ</a> <a id="4330" href="Pat.Term.html#3626" class="InductiveConstructor Operator">,</a> <a id="4332" href="Pat.Substitution.html#1191" class="Function">substSubstPatternItemᵈ</a> <a id="4355" href="Pat.Substitution.html#4290" class="Bound">σᵈ</a> <a id="4358" href="Pat.Substitution.html#4298" class="Bound">item</a>
<a id="4363" href="Pat.Substitution.html#1102" class="Function">substSubstPatternᵈ</a> <a id="4382" href="Pat.Substitution.html#4382" class="Bound">σᵈ</a> <a id="4385" class="Symbol">(</a><a id="4386" href="Pat.Substitution.html#4386" class="Bound">σ₁</a> <a id="4389" href="Pat.Term.html#3822" class="InductiveConstructor Operator">++ˢᵖ</a> <a id="4394" href="Pat.Substitution.html#4394" class="Bound">σ₂</a><a id="4396" class="Symbol">)</a> <a id="4398" class="Symbol">=</a> <a id="4400" href="Pat.Substitution.html#1102" class="Function">substSubstPatternᵈ</a> <a id="4419" href="Pat.Substitution.html#4382" class="Bound">σᵈ</a> <a id="4422" href="Pat.Substitution.html#4386" class="Bound">σ₁</a> <a id="4425" href="Pat.Term.html#3822" class="InductiveConstructor Operator">++ˢᵖ</a> <a id="4430" href="Pat.Substitution.html#1102" class="Function">substSubstPatternᵈ</a> <a id="4449" href="Pat.Substitution.html#4382" class="Bound">σᵈ</a> <a id="4452" href="Pat.Substitution.html#4394" class="Bound">σ₂</a>

<a id="4456" href="Pat.Substitution.html#1191" class="Function">substSubstPatternItemᵈ</a> <a id="4479" class="Symbol">{</a><a id="4480" class="Argument">m≥n</a> <a id="4484" class="Symbol">=</a> <a id="4486" href="Pat.Substitution.html#4486" class="Bound">m≥n</a><a id="4489" class="Symbol">}</a> <a id="4491" href="Pat.Substitution.html#4491" class="Bound">σᵈ</a> <a id="4494" class="Symbol">(</a><a id="4495" href="Pat.Term.html#3051" class="InductiveConstructor">term</a> <a id="4500" href="Pat.Substitution.html#4500" class="Bound">p</a><a id="4501" class="Symbol">)</a> <a id="4503" class="Symbol">=</a> <a id="4505" href="Pat.Term.html#3051" class="InductiveConstructor">term</a> <a id="4510" class="Symbol">(</a><a id="4511" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="4525" class="Symbol">(</a><a id="4526" href="Pat.Depth.html#6337" class="Function">exts↾≥ᵈ</a> <a id="4534" href="Pat.Substitution.html#4486" class="Bound">m≥n</a> <a id="4538" href="Pat.Substitution.html#4491" class="Bound">σᵈ</a><a id="4540" class="Symbol">)</a> <a id="4542" href="Pat.Substitution.html#4500" class="Bound">p</a><a id="4543" class="Symbol">)</a>
<a id="4545" href="Pat.Substitution.html#1191" class="Function">substSubstPatternItemᵈ</a> <a id="4568" class="Symbol">{</a><a id="4569" class="Argument">σ</a> <a id="4571" class="Symbol">=</a> <a id="4573" href="Pat.Substitution.html#4573" class="Bound">σ</a><a id="4574" class="Symbol">}</a> <a id="4576" href="Pat.Substitution.html#4576" class="Bound">σᵈ</a> <a id="4579" class="Symbol">(</a><a id="4580" href="Pat.Term.html#3194" class="InductiveConstructor">var</a> <a id="4584" class="Symbol">(</a><a id="4585" href="Data.StagedList.html#5960" class="InductiveConstructor">L</a> <a id="4587" href="Pat.Substitution.html#4587" class="Bound">x</a><a id="4588" class="Symbol">))</a> <a id="4591" class="Symbol">=</a> <a id="4593" href="Pat.Matching.html#4480" class="Function">toSubstPatternItem</a> <a id="4612" href="Data.StagedList.html#5960" class="InductiveConstructor">L</a> <a id="4614" class="Symbol">(</a><a id="4615" href="Pat.Term.html#1663" class="Function">lookup</a> <a id="4622" href="Pat.Substitution.html#4573" class="Bound">σ</a> <a id="4624" href="Pat.Substitution.html#4587" class="Bound">x</a><a id="4625" class="Symbol">)</a>
<a id="4627" href="Pat.Substitution.html#1191" class="Function">substSubstPatternItemᵈ</a> <a id="4650" href="Pat.Substitution.html#4650" class="Bound">σᵈ</a> <a id="4653" class="Symbol">(</a><a id="4654" href="Pat.Term.html#3194" class="InductiveConstructor">var</a> <a id="4658" class="Symbol">(</a><a id="4659" href="Data.StagedList.html#6006" class="InductiveConstructor">R</a> <a id="4661" href="Pat.Substitution.html#4661" class="Bound">x</a><a id="4662" class="Symbol">))</a> <a id="4665" class="Symbol">=</a> <a id="4667" href="Pat.Term.html#3194" class="InductiveConstructor">var</a> <a id="4671" class="Symbol">(</a><a id="4672" href="Data.StagedList.html#6006" class="InductiveConstructor">R</a> <a id="4674" href="Pat.Substitution.html#4661" class="Bound">x</a><a id="4675" class="Symbol">)</a>

<a id="4678" class="Comment">-- We then define the substitution functions without a depth upper bound,</a>
<a id="4752" class="Comment">-- by precomputing the depth upper bound using the depth function.</a>
<a id="4819" class="Comment">-- Intinsic typing ensures that substitution preserves typing (Lemma 4.1).</a>

<a id="4895" class="Comment">-- | Apply a substitution σ to a term e.</a>
<a id="subst"></a><a id="4936" href="Pat.Substitution.html#4936" class="Function">subst</a> <a id="4942" class="Symbol">:</a> <a id="4944" href="Pat.Term.html#2470" class="Function">Subst</a> <a id="4950" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="4952" href="Pat.Context.html#582" class="Generalizable">Γ′</a> <a id="4955" class="Symbol">→</a> <a id="4957" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="4959" href="Pat.Term.html#560" class="Datatype">⊢</a> <a id="4961" href="Pat.Context.html#557" class="Generalizable">A</a> <a id="4963" href="Pat.Term.html#560" class="Datatype">^</a> <a id="4965" href="Data.StagedList.html#843" class="Generalizable">n</a> <a id="4967" class="Symbol">→</a> <a id="4969" href="Pat.Context.html#582" class="Generalizable">Γ′</a> <a id="4972" href="Pat.Term.html#560" class="Datatype">⊢</a> <a id="4974" href="Pat.Context.html#557" class="Generalizable">A</a> <a id="4976" href="Pat.Term.html#560" class="Datatype">^</a> <a id="4978" href="Data.StagedList.html#843" class="Generalizable">n</a>
<a id="4980" href="Pat.Substitution.html#4936" class="Function">subst</a> <a id="4986" href="Pat.Substitution.html#4986" class="Bound">σ</a> <a id="4988" class="Symbol">=</a> <a id="4990" href="Pat.Substitution.html#787" class="Function">substᵈ</a> <a id="4997" class="Symbol">(</a><a id="4998" href="Pat.Depth.html#3520" class="Function">≤ᵈ′-refl</a> <a id="5007" href="Pat.Substitution.html#4986" class="Bound">σ</a><a id="5008" class="Symbol">)</a>

<a id="5011" class="Comment">-- | Apply a substitution σ to a another substitution σ₁.</a>
<a id="substSubst"></a><a id="5069" href="Pat.Substitution.html#5069" class="Function">substSubst</a> <a id="5080" class="Symbol">:</a> <a id="5082" href="Pat.Term.html#2470" class="Function">Subst</a> <a id="5088" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="5090" href="Pat.Context.html#582" class="Generalizable">Γ′</a> <a id="5093" class="Symbol">→</a> <a id="5095" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="5097" href="Pat.Term.html#1421" class="Datatype Operator">⊩</a> <a id="5099" href="Pat.Context.html#580" class="Generalizable">Δ</a> <a id="5101" class="Symbol">→</a> <a id="5103" href="Pat.Context.html#582" class="Generalizable">Γ′</a> <a id="5106" href="Pat.Term.html#1421" class="Datatype Operator">⊩</a> <a id="5108" href="Pat.Context.html#580" class="Generalizable">Δ</a>
<a id="5110" href="Pat.Substitution.html#5069" class="Function">substSubst</a> <a id="5121" href="Pat.Substitution.html#5121" class="Bound">σ</a> <a id="5123" class="Symbol">=</a> <a id="5125" href="Pat.Substitution.html#854" class="Function">substSubstᵈ</a> <a id="5137" class="Symbol">(</a><a id="5138" href="Pat.Depth.html#3520" class="Function">≤ᵈ′-refl</a> <a id="5147" href="Pat.Substitution.html#5121" class="Bound">σ</a><a id="5148" class="Symbol">)</a>

<a id="5151" class="Comment">-- | Apply a substitution σ to a substitution entry.</a>
<a id="substSubstItem"></a><a id="5204" href="Pat.Substitution.html#5204" class="Function">substSubstItem</a> <a id="5219" class="Symbol">:</a> <a id="5221" href="Pat.Term.html#2470" class="Function">Subst</a> <a id="5227" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="5229" href="Pat.Context.html#582" class="Generalizable">Γ′</a> <a id="5232" class="Symbol">→</a> <a id="5234" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="5236" href="Pat.Term.html#970" class="Datatype Operator">⊩[</a> <a id="5239" href="Pat.Context.html#580" class="Generalizable">Δ</a> <a id="5241" href="Pat.Term.html#970" class="Datatype Operator">⊢</a> <a id="5243" href="Pat.Context.html#557" class="Generalizable">A</a> <a id="5245" href="Pat.Term.html#970" class="Datatype Operator">^</a> <a id="5247" href="Data.StagedList.html#857" class="Generalizable">m≥n</a> <a id="5251" href="Pat.Term.html#970" class="Datatype Operator">]</a> <a id="5253" class="Symbol">→</a> <a id="5255" href="Pat.Context.html#582" class="Generalizable">Γ′</a> <a id="5258" href="Pat.Term.html#970" class="Datatype Operator">⊩[</a> <a id="5261" href="Pat.Context.html#580" class="Generalizable">Δ</a> <a id="5263" href="Pat.Term.html#970" class="Datatype Operator">⊢</a> <a id="5265" href="Pat.Context.html#557" class="Generalizable">A</a> <a id="5267" href="Pat.Term.html#970" class="Datatype Operator">^</a> <a id="5269" href="Data.StagedList.html#857" class="Generalizable">m≥n</a> <a id="5273" href="Pat.Term.html#970" class="Datatype Operator">]</a>
<a id="5275" href="Pat.Substitution.html#5204" class="Function">substSubstItem</a> <a id="5290" href="Pat.Substitution.html#5290" class="Bound">σ</a> <a id="5292" class="Symbol">=</a> <a id="5294" href="Pat.Substitution.html#918" class="Function">substSubstItemᵈ</a> <a id="5310" class="Symbol">(</a><a id="5311" href="Pat.Depth.html#3520" class="Function">≤ᵈ′-refl</a> <a id="5320" href="Pat.Substitution.html#5290" class="Bound">σ</a><a id="5321" class="Symbol">)</a>

<a id="5324" class="Comment">-- | Apply a substitution σ to a pattern p.</a>
<a id="substPattern"></a><a id="5368" href="Pat.Substitution.html#5368" class="Function">substPattern</a> <a id="5381" class="Symbol">:</a> <a id="5383" href="Pat.Term.html#2470" class="Function">Subst</a> <a id="5389" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="5391" href="Pat.Context.html#582" class="Generalizable">Γ′</a> <a id="5394" class="Symbol">→</a> <a id="5396" href="Pat.Term.html#2643" class="Datatype">Pattern</a> <a id="5404" href="Data.StagedList.html#843" class="Generalizable">n</a> <a id="5406" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="5408" href="Pat.Context.html#580" class="Generalizable">Δ</a> <a id="5410" href="Pat.Context.html#557" class="Generalizable">A</a> <a id="5412" href="Pat.Term.html#2550" class="Generalizable">Π</a> <a id="5414" class="Symbol">→</a> <a id="5416" href="Pat.Term.html#2643" class="Datatype">Pattern</a> <a id="5424" href="Data.StagedList.html#843" class="Generalizable">n</a> <a id="5426" href="Pat.Context.html#582" class="Generalizable">Γ′</a> <a id="5429" href="Pat.Context.html#580" class="Generalizable">Δ</a> <a id="5431" href="Pat.Context.html#557" class="Generalizable">A</a> <a id="5433" href="Pat.Term.html#2550" class="Generalizable">Π</a>
<a id="5435" href="Pat.Substitution.html#5368" class="Function">substPattern</a> <a id="5448" href="Pat.Substitution.html#5448" class="Bound">σ</a> <a id="5450" class="Symbol">=</a> <a id="5452" href="Pat.Substitution.html#1012" class="Function">substPatternᵈ</a> <a id="5466" class="Symbol">(</a><a id="5467" href="Pat.Depth.html#3520" class="Function">≤ᵈ′-refl</a> <a id="5476" href="Pat.Substitution.html#5448" class="Bound">σ</a><a id="5477" class="Symbol">)</a>

<a id="5480" class="Comment">-- | Apply a substitution σ to a substitution pattern π.</a>
<a id="substSubstPattern"></a><a id="5537" href="Pat.Substitution.html#5537" class="Function">substSubstPattern</a> <a id="5555" class="Symbol">:</a> <a id="5557" href="Pat.Term.html#2470" class="Function">Subst</a> <a id="5563" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="5565" href="Pat.Context.html#582" class="Generalizable">Γ′</a> <a id="5568" class="Symbol">→</a> <a id="5570" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="5572" href="Pat.Term.html#3520" class="Datatype Operator">∣</a> <a id="5574" href="Pat.Context.html#580" class="Generalizable">Δ</a> <a id="5576" href="Pat.Term.html#3520" class="Datatype Operator">⊩</a> <a id="5578" href="Pat.Context.html#585" class="Generalizable">Δ′</a> <a id="5581" href="Pat.Term.html#3520" class="Datatype Operator">↝</a> <a id="5583" href="Pat.Term.html#2550" class="Generalizable">Π</a> <a id="5585" class="Symbol">→</a> <a id="5587" href="Pat.Context.html#582" class="Generalizable">Γ′</a> <a id="5590" href="Pat.Term.html#3520" class="Datatype Operator">∣</a> <a id="5592" href="Pat.Context.html#580" class="Generalizable">Δ</a> <a id="5594" href="Pat.Term.html#3520" class="Datatype Operator">⊩</a> <a id="5596" href="Pat.Context.html#585" class="Generalizable">Δ′</a> <a id="5599" href="Pat.Term.html#3520" class="Datatype Operator">↝</a> <a id="5601" href="Pat.Term.html#2550" class="Generalizable">Π</a>
<a id="5603" href="Pat.Substitution.html#5537" class="Function">substSubstPattern</a> <a id="5621" href="Pat.Substitution.html#5621" class="Bound">σ</a> <a id="5623" class="Symbol">=</a> <a id="5625" href="Pat.Substitution.html#1102" class="Function">substSubstPatternᵈ</a> <a id="5644" class="Symbol">(</a><a id="5645" href="Pat.Depth.html#3520" class="Function">≤ᵈ′-refl</a> <a id="5654" href="Pat.Substitution.html#5621" class="Bound">σ</a><a id="5655" class="Symbol">)</a>

<a id="5658" class="Comment">-- | Apply a substitution σ to a substitution pattern entry.</a>
<a id="substSubstPatternItem"></a><a id="5719" href="Pat.Substitution.html#5719" class="Function">substSubstPatternItem</a> <a id="5741" class="Symbol">:</a> <a id="5743" href="Pat.Term.html#2470" class="Function">Subst</a> <a id="5749" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="5751" href="Pat.Context.html#582" class="Generalizable">Γ′</a> <a id="5754" class="Symbol">→</a> <a id="5756" href="Pat.Context.html#578" class="Generalizable">Γ</a> <a id="5758" href="Pat.Term.html#2937" class="Datatype Operator">∣</a> <a id="5760" href="Pat.Context.html#580" class="Generalizable">Δ</a> <a id="5762" href="Pat.Term.html#2937" class="Datatype Operator">⊩[</a> <a id="5765" href="Pat.Context.html#585" class="Generalizable">Δ′</a> <a id="5768" href="Pat.Term.html#2937" class="Datatype Operator">⊢</a> <a id="5770" href="Pat.Context.html#557" class="Generalizable">A</a> <a id="5772" href="Pat.Term.html#2937" class="Datatype Operator">^</a> <a id="5774" href="Data.StagedList.html#857" class="Generalizable">m≥n</a> <a id="5778" href="Pat.Term.html#2937" class="Datatype Operator">]↝</a> <a id="5781" href="Pat.Term.html#2550" class="Generalizable">Π</a> <a id="5783" class="Symbol">→</a> <a id="5785" href="Pat.Context.html#582" class="Generalizable">Γ′</a> <a id="5788" href="Pat.Term.html#2937" class="Datatype Operator">∣</a> <a id="5790" href="Pat.Context.html#580" class="Generalizable">Δ</a> <a id="5792" href="Pat.Term.html#2937" class="Datatype Operator">⊩[</a> <a id="5795" href="Pat.Context.html#585" class="Generalizable">Δ′</a> <a id="5798" href="Pat.Term.html#2937" class="Datatype Operator">⊢</a> <a id="5800" href="Pat.Context.html#557" class="Generalizable">A</a> <a id="5802" href="Pat.Term.html#2937" class="Datatype Operator">^</a> <a id="5804" href="Data.StagedList.html#857" class="Generalizable">m≥n</a> <a id="5808" href="Pat.Term.html#2937" class="Datatype Operator">]↝</a> <a id="5811" href="Pat.Term.html#2550" class="Generalizable">Π</a>
<a id="5813" href="Pat.Substitution.html#5719" class="Function">substSubstPatternItem</a> <a id="5835" href="Pat.Substitution.html#5835" class="Bound">σ</a> <a id="5837" class="Symbol">=</a> <a id="5839" href="Pat.Substitution.html#1191" class="Function">substSubstPatternItemᵈ</a> <a id="5862" class="Symbol">(</a><a id="5863" href="Pat.Depth.html#3520" class="Function">≤ᵈ′-refl</a> <a id="5872" href="Pat.Substitution.html#5835" class="Bound">σ</a><a id="5873" class="Symbol">)</a></pre>
  </body>
</html>
